#||||||||||||||||||||||||||||||||||||#
#|                                  |#
#|       NBTUltimate datapack       |#
#|      By: inon13 & Blue_Apple     |#
#|----------------------------------|#
#|        Please do not copy        |#
#|        without permission!       |#
#|                                  |#
#||||||||||||||||||||||||||||||||||||#

# OnGround Tag to run the commands only if on ground
execute as @e[type=fishing_bobber,nbt=!{OnGround:1b}] at @s run execute on origin if data entity @s SelectedItem{id:"minecraft:fishing_rod"}.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnGround:1b} run tag @n[type=fishing_bobber] add nbtu.item_entity.not_on_ground
execute as @e[type=firework_rocket,nbt=!{OnGround:1b}] at @s if data entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnGround:1b} run execute as @s at @s run tag @s add nbtu.item_entity.not_on_ground
execute as @e[type=#nbtultimate:technical/no_capital_item_data,nbt=!{OnGround:1b}] at @s if data entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnGround:1b} run execute as @s at @s run tag @s add nbtu.item_entity.not_on_ground
execute as @e[type=#nbtultimate:technical/capital_item_data,nbt=!{OnGround:1b}] at @s if data entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnGround:1b} run execute as @s at @s run tag @s add nbtu.item_entity.not_on_ground

# Capital I in item data
execute as @e[type=#nbtultimate:technical/capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[0].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[0]
execute as @e[type=#nbtultimate:technical/capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[1].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[1]
execute as @e[type=#nbtultimate:technical/capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[2].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[2]
execute as @e[type=#nbtultimate:technical/capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[3].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[3]
execute as @e[type=#nbtultimate:technical/capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[4].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[4]

# No capital I in item data
execute as @e[type=#nbtultimate:technical/no_capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[0].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[0]
execute as @e[type=#nbtultimate:technical/no_capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[1].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[1]
execute as @e[type=#nbtultimate:technical/no_capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[2].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[2]
execute as @e[type=#nbtultimate:technical/no_capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[3].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[3]
execute as @e[type=#nbtultimate:technical/no_capital_item_data,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[4].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[4]

# Firework rocket
execute as @e[type=firework_rocket,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[0].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[0]
execute as @e[type=firework_rocket,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[1].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[1]
execute as @e[type=firework_rocket,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[2].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[2]
execute as @e[type=firework_rocket,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[3].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[3]
execute as @e[type=firework_rocket,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[4].Command run execute as @s at @s run function nbtultimate:utilities/command_activate/command with entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity.Functions[4]

#  Fishing bobber
execute as @e[type=fishing_bobber,tag=!nbtu.item_entity.checked,tag=!nbtu.item_entity.not_on_ground] at @s run execute on origin run function nbtultimate:tick-functions/public_nbtu_values/run_command/tick_on_item_entity/fishing_bobber_command_activation with entity @s

# Checked Tag to run the commands once
execute as @e[type=fishing_bobber,tag=!nbtu.item_entity.not_on_ground] at @s run execute on origin if data entity @s SelectedItem{id:"minecraft:fishing_rod"}.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnce:1b} run tag @n[type=fishing_bobber] add nbtu.item_entity.checked
execute as @e[type=firework_rocket,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s FireworksItem.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnce:1b} run execute as @s at @s run tag @s add nbtu.item_entity.checked
execute as @e[type=#nbtultimate:technical/no_capital_item_data,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnce:1b} run execute as @s at @s run tag @s add nbtu.item_entity.checked
execute as @e[type=#nbtultimate:technical/capital_item_data,tag=!nbtu.item_entity.not_on_ground] at @s if data entity @s Item.components."minecraft:custom_data".PublicNBTUValues.RunCommand.tickOnItemEntity{RunOnce:1b} run execute as @s at @s run tag @s add nbtu.item_entity.checked

tag @e remove nbtu.item_entity.not_on_ground